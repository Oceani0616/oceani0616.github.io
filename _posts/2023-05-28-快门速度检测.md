---
layout:     post
title:      "快门速度测试仪"
subtitle:   "光电二极管 + 运放 + 单片机"
date:       2023-05-28 16:31:29
author:     "Oceani Cheng"
Comments:   true
header-img: "img/post_speed/konica-fs1-scaled.jpg"

tags:
    - Music
    - Camera
    - 菲林
    - 单反相机
    - 美能达
    - 柯尼卡
---

Background Music: 雨.西湖 by JINBAO

<audio controls>
  <source src="/assets/music/Rain and west lake.flac" type="audio/flac">
</audio>

轻轻洒洒的雨点。2022年9月1日，早上在门口的阿涛菜馆吃了一顿早午饭，大块的东坡肉。
9月2日，出门坐4路车沿着虎跑路开出西湖区，再坐地铁到西溪湿地南。天阴沉沉的，进门之后吃肯德基的时候天上就飘起了小雨。
花了300块钱租了手摇船，船夫撑着橹带我们在公园里纵横迷宫的水路之间静谧的穿行。
船的一大好处就是除了哗啦啦的轻微水声，其它一点多余的声音都没有。我们雇的船夫撑船，连水声都没有。
我和糖糖带了SONY的A7R4和徕卡的M-E，沉寂的水道两旁长着黄绿的竹子和各种植物，雨时而大时而小，大的时候必须得回船舱，小的时候可以坐在外面拍照。
可以趁着雨小，上岛游玩。岛上有路和仿古的建筑，成片的荷花塘，吊着的酒旗招牌，毛毛细雨应该不至于把相机打坏。我们拍了好多照片。
江南烟雨莫过于此吧。

进入正题！！

# DIY一个快门速度测试仪

过两天要陪着糖糖去日本耍，糖糖去做实验，而我的一大目的就是去海淘相机。由于是胶片相机，自动曝光的准度无法现场查看，因此带一个快门速度检测仪深有必要。
找了一圈，网上商用的皆不如意。因此我决定自己做一个。

## 1. 原理
### 1.1 想法1:straight-forwards的想法，trivial
一开始想的其实很简单，在镜头前面放一个**发光设备**，在胶片曝光的地方放一个光敏的**接收设备**。只要打开电源，发光设备开始持续发光，单片机开始记录光敏设备的输出信号（此时由于快门闭合挡住了光，检测不到输出信号）。然后，按快门，比如设定是**1/200秒**，咔嚓，快门开启**1/200秒**。这时光敏设备会收到一段**1/200秒**的光信号，于是将之转化为一段**1/200秒**的电信号，**单片机**读出**电信号**并且计算时长，看看是不是1/200s就行了.  
<br>
因为一般的胶片电子相机的快门都做到**1/4000s**甚至**1/8000s**了（最快的是美能达A-9的**1/12000s**），因此光敏设备的反应必须足够快（算一下，大概得小**100µs**），也就是带宽足够高，得**10kHz**以上。一般光敏电阻被光照之后，其电阻完成变化的时间是**5～30ms**，太慢了。而光电二极管电阻完成变化的时间是**10ns**左右，绰绰有余。因此选择光电（或者叫光敏）二极管。  
<br>
> 光敏二极管的核心部分也是一个PN结。光敏二极管是在反向电压作用之下工作的。没有光照时，反向电流很小（一般小于**0.1µA**），称为暗电流。当有光照时，携带能量的光子进入PN结后，把能量传给共价键上的束缚电子，使部分电子挣脱共价键，从而产生电子-空穴对（光生载流子）。它们在反向电压作用下参加漂移运动，使反向电流明显变大，光的强度越大，反向电流也越大。  
<br>
> 但光敏二极管的电流比较微弱，需要用运放进行放大，然后将运放输出的信号输入单片机。单片机需要有足够高的采样率，也是10kHz以上，最好50kHz。  

系统大概是这样：首先发光设备可以利用环境光或者手电筒，反正不用和这个系统有关联。其次，光敏二极管和单片机、显示屏、电池一起放在电路板上，光敏二极管连接到单片机的ADC输入端，单片机输出端输出到显示屏；用电池给这仨供电。
采购名单：
1. 光敏二极管（TSL2561或BPW34）
2. 单片机（选STM32，简单便宜，功能够用。STM32F103C8T6）


### 1.2 想法2: 用声音
每次把相机后盖打开来还是太复杂了。如果用声音呢？相机的机械快门动作通常会发出可听的“咔嚓”声。利用单片机精确测量这段时间，可以间接测量快门速度。然而这个想法的缺点在于，快门声可能并不能准确反映快门

### 1.3 想法3：





